plugins {
    id 'java-library'
    id 'com.github.johnrengelman.shadow' version '7.0.0'
}

group = 'cz.neumimto.rpg'
version = '2.1.0-SNAPSHOT'

dependencies {
    annotationProcessor project(':Generator')

    api project(':API')
    api 'net.bytebuddy:byte-buddy:' + project.bytebuddy
    api "co.aikar:acf-core:" + project.acf
    api 'com.squareup:javapoet:' + project.javapoet
    api 'org.codehaus.janino:janino:' + project.janino
    
    compileOnly 'org.graalvm.sdk:graal-sdk:' + project.graal
    compileOnly 'org.graalvm.js:js:' + project.graal
    compileOnly 'org.graalvm.js:js-scriptengine:' + project.graal

    testImplementation project(':Database-Persistence')
    testImplementation project(':Common-Persistence')
    testImplementation 'org.graalvm.sdk:graal-sdk:' + project.graal
    testImplementation 'org.graalvm.js:js:' + project.graal
    testImplementation 'org.graalvm.sdk:graal-sdk:' + project.graal
    testImplementation 'org.graalvm.js:js:' + project.graal
    testImplementation 'org.graalvm.js:js-scriptengine:' + project.graal
    
}

compileJava {
    options.compilerArgs += ["-parameters"]
    options.fork = true
    options.forkOptions.executable = 'javac'
}


compileTestJava {
    options.compilerArgs += ["-parameters"]
    options.fork = true
    options.forkOptions.executable = 'javac'
}

shadowJar {
   // relocate 'co.aikar.commands', 'cz.neumimto.acf'
}


build.dependsOn shadowJar